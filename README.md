# Hockey Analytics: Mapping the Path to Scoring Goals in the NHL

Using a dataset that tracks 124 different metrics for all 122,026 shots taken during the 2022–23 NHL Season, our goal was to examine the relationship between a variety of factors such as shot angle, shot type, shot distance, and location on the ice and the likelihood of that shot being a goal. This dataset also applies expected values to the 6 possible outcomes of the shot. These outcomes are as follows: Goal, Freeze (the goalie holds the puck and stops play), Rebound, Play continues in zone, play continues outside zone, or play stops. All of these expected values are represented as a proportion and collectively add up to 1 for each shot. We also analyzed the discrepancies between the expected values of the outcome of the shot and the actual outcome.

![image](https://github.com/user-attachments/assets/59806f41-29ff-4fb6-a048-dec40fc4f23f)

We began our analysis by brainstorming a range of visualizations that align with our primary objectives: effectively illustrating the key variables identified through a correlation matrix. These variables — shot angle, shot type, shot distance, and location on the ice — are most influential in determining the outcome of a shot. Our focus is on understanding how these factors affect the probability of a shot resulting in a goal.

![image](https://github.com/user-attachments/assets/69140b96-fd89-4f90-8419-0d97d722f428)

From the brainstorm, we concluded that ice rink heat maps and scatter plots most effectively represent the data, while also immersing the viewer in the context of hockey. So we further refined these visualizations for user testing.

One particularly effective and interesting visualization that emerged from combining different graphs was an interactive scatter and bar chart. This chart effectively displays the relationship between shot distance and angle, and their combined impact on the probability of a shot becoming a goal, with a dropdown to allow the user to filter by type of shot.

Initially, the interactive graphs were designed to show the distribution of shot distance of the highest percentage shooting team in the NHL on one scatter plot, the lowest percentage shooting team’s shot distance distribution on the next scatter plot, and the shot distance and angle bar graph. However, conducting careful user testing on two roommates revealed insightful feedback that the graphs came across as initially difficult to interpret as splitting up by two different teams overcomplicated and potentially introduced bias by only focusing on two teams, we shifted our approach to create the final visualization seen below. This shows the aggregated team averages for shot distance and goal probability on the left scatter, of which areas with points can be selected to reflect on the right scatter plot and vice versa. To flow with the reader’s expectation of the graphs when reading the title, the right scatter shows aggregated team averages for shot angle and goal probability. We also added the dropdown feature due to feedback that the initial visualization was attempting to communicate too much at once. This allows the user to select which type of shot they want the graphs to be showing data for, such as slap shots. This led to our final version of the interactive scatter and bar graph below: How shot distance and angle affect goal probability.

![image](https://github.com/user-attachments/assets/685b98df-462f-4c44-b723-766f6120c041)

The first scatters’ independent variable, shot distance, is a physical data type and quantitative ratio attribute type, which is denoted by point marks encoded with the color gray except when highlighted, which then turn blue. The second scatters independent variable, shot distance, is also a physical data type and quantitative ratio attribute type, and is similarly denoted by point marks encoded with the color gray except turn green upon being selected. The dependent variable on both scatter plots, expected goal, is also physical data type and quantitative ratio attribute type, and is thus denoted by the corresponding colored points for distance and angle.

The users highlighted selection on both of these scatter plots enables responsiveness to the bar graph below, which encodes bar graphs with distance and a sequential color scheme to show shot angle. This interactivity enables users to easily highlight a group of outliers in one graph to see how it correlates with the other. For example, by selecting the the bottom left corner area of the distance scatter plot, which signifies very close shots with an extremely low goal probability, this correlates on the shot angle vs. expected goal scatter to points on the extremely high ends of shot angle with again incredibly low scoring probability, which together tells us that the close shots with low angles tend to be extremely unlikely to score. By looking below at the bar graph, we can see that it is highly skewed right, which means lower shot distances correlate with higher goal probability, which is not surprising. What is somewhat surprising, though, is with every shot type selected, the mean shot angle for shot distance 0–5 is above 15, which is significantly greater than any other shot distance. This tells us that most close shots are occurring at extreme angles to the net. This distribution maintains a similar form as long as enough points are selected, no matter the shot type.

![image](https://github.com/user-attachments/assets/9ce882eb-db3f-4757-8b41-77e24a275d0f)

The above graph shows a heatmap displaying the mean xGoal value for all shots taken from that area of the ice. While the darker clusters indicating higher mean xGoal values in front of and around the net were to be expected, one of the aspects of this graph which we initially found surprising were the seemingly random clusters of high xGoal values throughout the neutral zone. However, after some discussion and hypothesizing, we decided that the most plausible explanation for this was that these values are skewed by shots taken on empty nets. For those who are not familiar, the rules of hockey allow a team to pull their goaltender in exchange for a 6th skater, a move that typically happens in the final minutes of close games. So it stands to reason that a shot on an empty net, even from halfway across the ice, would reasonably have a rather high xGoal value. This, combined with the fact that shots are generally only taken from the neutral zone in situations like this, seem to provide a very plausible explanation for these dark spots in the center of the ice. Another thing that is important to note about this graph is that the darkest spots only represent a xGoal value ≥25%, which may seem fairly low. This was a very purposeful design choice, due to the fact that the dataset was so large and the mean xGoal value across all shots is only 0.073. Since the threshold of high danger shots is so low, this was primarily done to establish contrast and enhance readability.

![image](https://github.com/user-attachments/assets/c59e912f-3d5f-4e50-a958-5c6218cda0a7)

After examining the mean xGoal values for shots from all locations of the ice, we decided we wanted to narrow our focus into the offensive zone only, and compare the discrepancies between xGoal value and actual shooting percentage. The collective shooting percentage across all shots in the dataset is 7.19%, which is only slightly lower than the mean xGoal value of 7.38%. However, upon comparing these two charts side by side and examining the axes, we noticed that shots from high danger areas tended to be slightly over-valued by the xGoal model when compared to their actual shooting percentage. While shots in and around the crease area tended to have xGoal values upwards of .2, the actual shooting percentage from these areas appeared to sit around 15%, with none of them seemingly exceeding 18% on average. Obviously there are many factors beyond location that play into these expected values, and after all they are Expected, it does seem that shots very close to the crease are generally overvalued by between 10 to 25% in xGoal value.

![image](https://github.com/user-attachments/assets/42111213-a2e4-48ef-a3ec-0b3c8e0007a0)

This chart shows a comparison between the expected goal percentage and the distance of the shot. As we can see from the chart, the closer the distance of the shot is the more likely the shot is expected to go in the net. As we increase distance we notice that the expected goal value for the shot decreases. Some of the outliers that we are shown on the graph could be because of empty nets or tip-in goals. Also we can assume that the majority of the shots from higher distances are shots that are from dump-ins or potentially from icing the puck on penalty kills.

![image](https://github.com/user-attachments/assets/e43457c0-3cb4-42fb-86fe-ed2758d1db7b)

This box shows the distribution of shot types for shots with a xGoal value ≥50%. What initially surprised us most is the backhand (BACK) value being so high and the slapshot (SLAP) value being so low. However, this made more sense after going back analyzing the distribution scatter plot comparing shot distance and xGoal values; as the xGoal value for a shot generally decreases as the distance from the goal increases. Due to their ability to generate higher power, often at the expense of accuracy, slapshots are generally taken from further away. The mean shot distance for slapshots in the dataset was 47.83 ft., which is by far the furthest mean distance of any shot type (for reference, the mean distance for all shot types was 33.78 ft.). Factors such as the higher average shot distance, and the lowered accuracy that is characteristic of slapshots generally cause slapshots to be lower danger, lower percentage shots which help explain the relatively lower xGoal values for slapshots. Conversely, the mechanics of backhand shots make it significantly harder to generate power compared to other shots taken using the forehand, and as a result these shots are often taken much closer to the goal in high danger areas. Additionally, the effect of backhand shots on goalies is analogous to the effect of knuckleballs on hitters in baseball, as the unpredictable and erratic movement compensates for the lower speed and makes it significantly harder to track. The fact that these shots move very unpredictably and are typically taken from high danger areas help explain the higher xGoal values. We can see that there are outliers on the graph for slap shots and tip-ins. One plausible explanation for this could stem from inconsistencies in the classification of shots known as one-timers. A one-timer is defined as “a shot that occurs when a player meets a teammate’s pass with an immediate slapshot, without any attempt to control the puck on their stick”. Since one-timers are not classified as a separate shot type, and NHL stats are often tracked by team or arena employees, rather than the league or a 3rd party entity, it is very possible that there are inconsistencies with how they are classified from team to team. The source of the dataset, MoneyPuck, even specifies in the data dictionary that the data may be inconsistent, and that “NHL shot data is known to have issues and biases”.

What worked well for us was our systematic approach with handling the data and using geojson files to create a visualization of an ice rink. Being able to show an ice rink and where these shots were coming from and which were successful was very helpful. This gave a great visual representation for people who are unfamiliar with hockey and allowed for a more complex understanding of what was happening than showing line charts and graphs. Some challenges we faced were handling the outliers in the datasets. When showing areas where players were scoring from there were a lot of highlighted areas behind the nets and in the neutral zone where there was no explanation as to what had happened, was it an empty net or a fluke goal? Additionally, it was difficult to maintain simple visualizations because we had the ability to display an ice rink to show the data. This both helped and hurt our project.

We explored a lot of different ways to visualize the shot data and we found it best to use an interactive visualization where we could show both the shot angles and the distance of the shot. We tested these options by using the different shot metrics in altair that would have correlation to the expected goal value. Since the dataset was so large, there were certain visualizations that we created that seemed a bit overboard and so we needed to test different xGoal values in order to make it easier to follow. Through trial and error, we came up with the options presented as they most effectively displayed the story we were trying to tell.

The hockey rink geoJson file was a very unique and effective tool for people viewing it to understand areas on the rink and shot location. The scatter plots showed the relations between the various metrics the best as they are great for showing correlation and telling the story. With the box plot showing shot types, it gives us an ever deeper dive into the data and allows the reader to see which shot types produce better results. At the end of the day, we decided on the ones we believed told the story the best while incorporating these metrics and expected goal value.

An area that we would have liked to explore would have been rebound goals. A rebound is defined within the dataset as a shot occurring within 3 seconds of the previous shot. It would have been interesting to see the most likely shot to score on a power play and during a shootout. These are ideas we would have loved to expand upon had we been given more time. We would have also liked to analyze the Vegas Golden Knights to find trends in their gameplay that allowed them to be the best team in the league and win the Stanley Cup in 2023. Breaking down the types of shots that they were taking and areas that they were successful in and least successful would allow us to determine what made their team the best.
